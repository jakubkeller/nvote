[[define "parent_post"]]
  <div class="flex card" style="padding: 20px 0px;">
    <div class="votes flex">
      <form class="vote-form" action="/vote/[[$.Post.ID]]" method="POST">
        <input type="hidden" name="direction" value="true">
        <input type="hidden" name="target" value="[[$.Post.ID]]">
        <input type="hidden" name="csrf" value="[[$.CsrfToken]]">
        <input class="text-button" type="submit" value="&#9650;">
      </form>
      <div class="post-count">[[score $.Post.Score]]</div>
      <form class="vote-form" action="/vote/[[$.Post.ID]]" method="POST">
        <input type="hidden" name="direction" value="false">
        <input type="hidden" name="target" value="[[$.Post.ID]]">
        <input type="hidden" name="csrf" value="[[$.CsrfToken]]">
        <input class="text-button" type="submit" value="&#9660;">
      </form>
    </div>
    <div>
      [[$channel := $.Post.Channel]]
      [[if eq $channel ""]]
        [[$channel = "all"]]
      [[end]]
      <p class="post-view-title">
        [[/* TODO: Show parent preview or something else here */]]
        [[if eq $.Post.Title ""]]
          <a href="/p/[[$.Post.Parent]]">View Parent â†‘</a>
        [[else]]
          [[template "post_title" dict "Channel" $channel "Type" "post" "Post" $.Post]]
        [[end]]
      </p>
      [[/* TODO: turn tagline into a template, consolidate with the similar block in post_row.html.tmpl */]]
      <p class="post-view-tagline">
        [[$pubkey := $.Post.PubKey]]
        [[$time := (timeAgo $.Post.CreatedAt)]]
        [[if eq $.Preview true]]
          [[$pubkey = $.User.PubKey]]
          [[$time = "just now"]]
        [[end]]
        <span>posted by </span>
        <span><a href="/u/[[$pubkey]]">[[pubkeyAlias $pubkey]]</a> </span>
        <span>to <a href="/c/[[$channel]]">[[$channel]]</a> </span>
        <span>[[$time]]</span>
      </p>
      [[if shouldDisplayBody $.Post $.User.HideImages]]
        <div class="post-body">
          [[if eq $.User.HideImages true]]
            [[renderMarkdownNoImages $.Post.Body]]
          [[else]]
            [[renderMarkdown $.Post.Body]]
          [[end]]
        </div>
      [[end]]
      <div class="post-actions">
        <span><a href="#comments">[[$.Post.Children]] comments</a> | </span>
        <span><a href="#share-box-[[$.Post.ID]]">share</a> | </span>
        <span><a href="/p/[[$.Post.ID]]/reply">reply</a></span>
        [[template "share_box" dict "Post" $.Post "Config" .Config]]
      </div>
      [[if eq $.Preview true]]
        <div class="red" style="font-size: .7em; margin-top: 8px;">(post preview)</div>
      [[end]]
    </div>
  </div>
[[end]]
