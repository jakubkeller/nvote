[[define "post_row"]]
  <div class="card post-row">
    <div class="flex">
      <div class="votes flex justify-center">
        <form class="vote-form" action="/vote/[[$.Post.ID]]" method="POST">
          <input type="hidden" name="direction" value="true">
          <input type="hidden" name="target" value="[[$.Post.ID]]">
          <input type="hidden" name="csrf" value="[[$.CsrfToken]]">
          <input class="text-button" type="submit" value="&#9650;">
        </form>
        <div class="post-count">[[score $.Post.Score]]</div>
        <form class="vote-form" action="/vote/[[$.Post.ID]]" method="POST">
          <input type="hidden" name="direction" value="false">
          <input type="hidden" name="target" value="[[$.Post.ID]]">
          <input type="hidden" name="csrf" value="[[$.CsrfToken]]">
          <input class="text-button" type="submit" value="&#9660;">
        </form>
      </div>
      <div>
        [[$channel := $.Post.Channel]]
        [[if eq $channel ""]]
          [[$channel = "all"]]
        [[end]]
        <div class="post-row-title">[[template "post_title" dict "Channel" $channel "Type" $.Type "Post" $.Post]]</div>
        <div class="post-actions">
          <span> posted by </span>
          <span><a href="/u/[[$.Post.PubKey]]">[[pubkeyAlias $.Post.PubKey]]</a></span>
          [[if eq $.Type "post"]]
            <span>to <a href="/c/[[$channel]]">[[$channel]]</a> </span>
          [[else]]
            <span>in reply to <a href="/p/[[$.Post.Parent]]">[[shortPubkey $.Post.Parent]]</a> </span>
            <span>in <a href="/c/[[$channel]]">[[$channel]]</a> </span>
          [[end]]
          <span>[[timeAgo $.Post.CreatedAt]]</span>
        </div>
        <div class="post-actions">
          <span><a href="/p/[[$.Post.ID]]">[[$.Post.Children]] [[if eq $.Type "post"]]comments[[else]]replies[[end]]</a> | </span>
          <span><a href="#share-box-[[$.Post.ID]]">share</a> | </span>
          <span><a href="/p/[[$.Post.ID]]/reply">reply</a></span>
          [[template "share_box" dict "Post" $.Post "Config" .Config]]
        </div>
      </div>
    </div>
  </div>
[[end]]
